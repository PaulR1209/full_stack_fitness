{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container cart-container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-4">
            <h2 class="text-center mb-4">Checkout</h2>

            <form method="post" novalidate id="payment-form">
                {% csrf_token %}
                {{ order_form|crispy }}

                <div class="form-group mb-3">
                    <label for="postal-code" class="form-label">Postal Code*</label>
                    <input type="text" id="postal-code" class="form-control" placeholder="Enter your postal code"
                        required>
                </div>

                <div class="form-group">
                    <label for="card-element" class="form-label">Card Details*</label>
                    <div id="card-element" class="form-control"></div>
                    <div id="card-errors" role="alert" class="invalid-feedback"></div>
                </div>

                <input type="hidden" id="client-secret" value="{{ client_secret }}">

                <div class="text-center">
                    <button type="submit" id="submit-button" class="btn btn-primary btn-lg">Pay Now</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
{{ block.super }}
{{ client_secret|json_script:"id_client_secret" }}
{% endblock %}